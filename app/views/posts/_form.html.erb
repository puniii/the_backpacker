<%= form_with(model: @post, local: true,url: choose_new_or_edit ) do |form| %>
<% if @post.errors.any? %>
  <div id="error_explanation">
    <h2><%= @post.errors.count %>件のエラーがあります</h2>

    <ul>
      <% @post.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<!-- Main Content -->
<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <div class="row control-group">

        <div class="form-group col-xs-12 floating-label-form-group controls">
          <!-- Map -->
          <div id="map"></div>

            <script>
            function initMap() {
            var tatebayashi = {lat: 36.2448429, lng: 139.5419484};
            var map = new google.maps.Map(document.getElementById('map'), {
              zoom: 11,
              center: tatebayashi
            });
            }
            </script>
            <!-- YOUR_API_KEYのところにAPIキーを挿入 -->

<script async defer src="<https://maps.googleapis.com/maps/api/js?key=<% ENV["YOUR_API_KEY"] %>&callback=initMap>"  type="text/javascript"></script>


        </div>

        <div class="form-group col-xs-12 floating-label-form-group controls">
          <%= form.text_field :content ,class: "form-control" ,placeholder: "コメントを入力してください"%>
          <p class="help-block text-danger"></p>

          <br>

          <%= form.file_field :image, id: :feed_image ,placeholder: "pic"%>
          <%= form.hidden_field :image_cache %>
          <p class="help-block text-danger"></p>
        </div>

        <div class="form-group col-xs-12 floating-label-form-group controls">
          <%= form.text_field :content ,class: "form-control" ,placeholder: "コメントを入力してください"%>
          <p class="help-block text-danger"></p>
        </div>

      </div>

      <br>
      <%= form.submit "Post tweet", class: 'btn btn-info' %>
      <br>
    <% end %>
    <br>
    <%= link_to "back", posts_path, class: 'btn btn-default' %>
  </div>

</div>
</div>
